<!DOCTYPE html>
<html lang="id">
<head>
  <meta charset="UTF-8" />
  <!-- HP/Tab fix 360px, PC menyesuaikan -->
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Intan Mutiara Cell - Marketplace</title>
  <style>
    :root{
      --brand:#28ceff;
      --price:#ee4d2d;
      --bg:#f6f6f6;
      --white:#fff;
      --text:#111;
      --gray:#666;
      --border:#e5e5e5;
    }
    *{box-sizing:border-box;margin:0;padding:0}
    body{font-family:"Poppins",sans-serif;background:var(--bg);color:var(--text)}

    /* Wrapper utama */
    .app-container{
      margin:0 auto;
      background:var(--bg);
      min-height:100vh;
    }
    @media (max-width:768px){
      .app-container{max-width:360px}
    }

    img{max-width:100%;display:block}

    /* Topbar */
    .topbar{position:sticky;top:0;z-index:1000;background:var(--brand);padding:10px;display:flex;align-items:center;gap:10px}
    .topbar__btn{width:28px;height:28px;border-radius:50%;background:rgba(255,255,255,.2)}
    .topbar__search{flex:1}
    .topbar__search input{width:100%;height:36px;border:none;border-radius:999px;padding:0 14px;font-size:.9rem;outline:none}

    /* Hero toko */
    .store-hero{position:relative;padding:40px 12px 20px;background:url('sampul.jpg') center/cover no-repeat}
    .store-hero::before{content:"";position:absolute;inset:0;background:rgba(255,255,255,.3);backdrop-filter:blur(3px)}
    .store-card{position:relative;z-index:1;display:flex;align-items:center;gap:12px}
    .store-card__logo{width:56px;height:56px;border-radius:50%;overflow:hidden;border:2px solid var(--white)}
    .store-card__name{font-weight:700;font-size:1rem}
    .store-card__stat{font-size:.85rem;color:var(--gray)}
    .store-card__actions{margin-left:auto;display:flex;flex-direction:column;gap:6px}
    .btn{padding:8px 14px;border-radius:8px;font-size:.85rem;font-weight:600;cursor:pointer}
    .btn--follow{background:var(--brand);color:var(--white);border:none}
    .btn--chat{background:var(--white);border:1px solid var(--border)}

    /* Tabs */
    .tabs{display:flex;gap:12px;padding:10px;background:var(--white);border-bottom:1px solid var(--border)}
    .tab{flex:1;text-align:center;font-weight:600;color:var(--gray);padding:8px;text-decoration:none}
    .tab.active{color:var(--brand);border-bottom:2px solid var(--brand)}

    /* Section */
    .section{background:var(--white);margin-top:10px;padding:12px}
    .section__head{display:flex;justify-content:space-between;align-items:center;margin-bottom:10px}
    .section__title{font-weight:700;font-size:1rem}

    /* Scroller */
    .scroller{display:flex;gap:10px;overflow-x:auto;scroll-snap-type:x mandatory;padding-bottom:6px}
    .scroller::-webkit-scrollbar{display:none}
    .scroller > *{flex:0 0 auto;scroll-snap-align:start}

    /* Produk */
    .card{background:var(--white);border:1px solid var(--border);border-radius:12px;overflow:hidden;text-decoration:none;color:inherit;display:block}
    .card__img img{width:100%;aspect-ratio:1/1;object-fit:cover}
    .badge{position:absolute;top:8px;left:8px;background:var(--brand);color:#fff;font-size:.7rem;padding:2px 5px;border-radius:4px}
    .card__body{padding:8px}
    .card__title{font-size:.85rem;height:2.5em;overflow:hidden}
    .price{color:var(--price);font-weight:700;font-size:.9rem}
    .meta{font-size:.75rem;color:var(--gray)}

    /* Grid 2 kolom */
    .grid{display:grid;gap:10px}
    .grid--2{grid-template-columns:repeat(2,1fr)}

    /* Footer */
    footer{background:var(--white);padding:15px;font-size:.85rem;color:var(--gray);text-align:center;border-top:1px solid var(--border)}
  </style>
</head>
<body>
<div class="app-container">

  <!-- TOPBAR -->
  <div class="topbar">
    <div class="topbar__btn"></div>
    <div class="topbar__search">
      <input id="searchBox" placeholder="Cari di Toko">
    </div>
    <div class="topbar__btn"></div>
  </div>

  <!-- HERO TOKO -->
  <div class="store-hero">
    <div class="store-card">
      <div class="store-card__logo"><img src="profil.jpg" alt="Logo Toko"></div>
      <div>
        <div class="store-card__name">INTAN MUTIARA CELL</div>
        <div class="store-card__stat">⭐ 4.8 | 139,3RB Pengikut</div>
      </div>
      <div class="store-card__actions">
        <button class="btn btn--follow" onclick="followStore()">Ikuti</button>
        <button class="btn btn--chat" onclick="openChat()">Chat</button>
      </div>
    </div>
  </div>

  <!-- TABS -->
  <div class="tabs">
    <a href="#" class="tab active" data-tab="toko">Toko</a>
    <a href="#" class="tab" data-tab="produk">Produk</a>
    <a href="#" class="tab" data-tab="kategori">Kategori</a>
  </div>

  <!-- CONTENT -->
  <main id="tabContent"></main>

  <!-- FOOTER -->
  <footer>
    Intan Mutiara • Jl. Pemuda No.27-31, Surabaya • WA: 0896-5342-9419
  </footer>
</div>

<script>
const apiURL="https://script.google.com/macros/s/AKfycbwhEx_j7s685ef89RppbIwjgwVePZyldnx8jC33lchkmirpWtr4Pm1sqhk5L7NjH_M6/exec";
let products=[];

function createCard(p){
  const v=p.variants?.[0];
  const img=p.images?.[0]||"https://via.placeholder.com/300";
  const price=v?Number(v.price).toLocaleString("id-ID"):"-";
  return `
    <a href="detail.html?id=${p.id}" class="card">
      <div class="card__img"><img src="${img}" alt="${p.title}"></div>
      <div class="card__body">
        <div class="card__title">${p.title}</div>
        <div class="price">Rp ${price}</div>
        <div class="meta">Terjual ${p.sold||"100+"}</div>
      </div>
    </a>`;
}

async function fetchProducts(){
  const res=await fetch(apiURL);
  products=await res.json();
  renderToko();
}

function renderToko(){
  document.getElementById("tabContent").innerHTML=`
    <section class="section">
      <div class="section__head"><div class="section__title">Kamu Mungkin Suka</div></div>
      <div class="scroller">${products.slice(0,10).map(createCard).join("")}</div>
    </section>
    <section class="section">
      <div class="section__head"><div class="section__title">Penjualan Tertinggi</div></div>
      <div class="grid grid--2">${products.slice(10,14).map(createCard).join("")}</div>
    </section>
    <section class="section">
      <div class="section__head"><div class="section__title">Rekomendasi Toko</div></div>
      <div class="grid grid--2">${products.slice(14,18).map(createCard).join("")}</div>
    </section>`;
}

function renderProduk(){
  document.getElementById("tabContent").innerHTML=`
    <section class="section"><div class="section__title">Semua Produk</div>
    <div class="grid grid--2">${products.map(createCard).join("")}</div></section>`;
}

function renderKategori(){
  const cats=["iPhone","Oppo","Vivo","Samsung","Xiaomi","Realme"];
  document.getElementById("tabContent").innerHTML=`
    <section class="section"><div class="section__title">Kategori</div>
    <div class="scroller">${cats.map(c=>`<div class="card" onclick="renderByCat('${c}')"><div class="card__body">${c}</div></div>`).join("")}</div>
    </section>`;
}

function renderByCat(cat){
  const f=products.filter(p=>p.title.toLowerCase().includes(cat.toLowerCase()));
  document.getElementById("tabContent").innerHTML=`
    <section class="section"><div class="section__title">${cat}</div>
    <div class="grid grid--2">${f.length?f.map(createCard).join(""):"<p>Tidak ada produk</p>"}</div></section>`;
}

/* Tabs */
document.querySelectorAll(".tab").forEach(tab=>{
  tab.addEventListener("click",e=>{
    e.preventDefault();
    document.querySelectorAll(".tab").forEach(t=>t.classList.remove("active"));
    tab.classList.add("active");
    if(tab.dataset.tab==="toko") renderToko();
    if(tab.dataset.tab==="produk") renderProduk();
    if(tab.dataset.tab==="kategori") renderKategori();
  });
});

/* Search */
document.getElementById("searchBox").addEventListener("input",e=>{
  const key=e.target.value.toLowerCase();
  const f=products.filter(p=>p.title.toLowerCase().includes(key));
  document.getElementById("tabContent").innerHTML=`
    <section class="section"><div class="section__title">Hasil Pencarian</div>
    <div class="grid grid--2">${f.length?f.map(createCard).join(""):"<p>Tidak ada produk</p>"}</div></section>`;
});

/* Chat & Follow */
function openChat(){alert("Fitur chat pembeli & seller akan ditambahkan di sini.")}
function followStore(){alert("Fitur Ikuti Toko akan ditambahkan di sini.")}

fetchProducts();
</script>
</body>
</html>
